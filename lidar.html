<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LiDAR Setup & Integration</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <header>
    <h1>LiDAR System Guide (Raspberry Pi + ROS 2 Humble)</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="parts.html">Parts List</a>
      <a href="sensor.html">Sensor Setup</a>
      <a href="lidar.html">LiDAR Car</a>
    </nav>
    <button onclick="toggleDarkMode()">üåô Toggle Dark Mode</button>
  </header>

<section class="card">
  <details>
    <summary>ü§ñ Ubuntu and ROS2 Setup on Raspberry Pi</summary>

    <!-- Keep everything inside one styled container -->
    <div class="setup-group">
      <ol>
        <li>Flash Ubuntu 22.04 to SD</li>
        <li>Enable SSH, Wi-Fi, boot the Pi</li>
        <li>Install GUI:<br><code>sudo apt install xfce4 lightdm -y</code></li>
        <li>Install Tailscale:<br><code>curl -fsSL https://tailscale.com/install.sh | sh</code></li>
        <li>Install VNC:<br><code>sudo apt install x11vnc -y</code></li>
        <li>Install ROS 2 Humble, source in bashrc</li>
        <li>Create ROS workspace:<br><code>mkdir -p ~/ros2_ws/src && colcon build</code></li>
        <li>Install <code>colcon</code>, <code>joy</code>, <code>rpi.gpio</code></li>
        <li>Create mecanum drive package</li>
        <li>Pair PS4 controller with <code>bluetoothctl</code></li>
        <li>Headless HDMI settings for Pi</li>
      </ol>

      <!-- Nested dropdown that maintains the white box and full width -->
      <details class="nested-details">
        <summary>üì• Installing ROS2 on Ubuntu 22.04 Server</summary>
        <ol>
          <li>Flash Ubuntu 22.04 to SD</li>
          <li>Enable SSH, Wi-Fi, boot the Pi</li>
          <li>Install GUI:<br><code>sudo apt install xfce4 lightdm -y</code></li>
          <li>Install Tailscale:<br><code>curl -fsSL https://tailscale.com/install.sh | sh</code></li>
          <li>Install VNC:<br><code>sudo apt install x11vnc -y</code></li>
          <li>Install ROS 2 Humble, source in bashrc</li>
          <li>Create ROS workspace:<br><code>mkdir -p ~/ros2_ws/src && colcon build</code></li>
          <li>Install <code>colcon</code>, <code>joy</code>, <code>rpi.gpio</code></li>
          <li>Create mecanum drive package</li>
          <li>Pair PS4 controller with <code>bluetoothctl</code></li>
          <li>Headless HDMI settings for Pi</li>
        </ol>
      </details>
    </div>
  </details>
</section>


    <section class="card">
  <details>
    <summary>üì∑ USB Camera Setup on ROS 2 </summary>

    <p><strong>How to Set Up a USB Camera on ROS 2 (Logitech Brio 100)</strong><br>
    This guide will help you install and run a USB camera (like the Logitech Brio 100) using ROS 2 and Ubuntu. We‚Äôll use two nodes: one to publish raw camera frames (<code>/image_raw</code>) and another to publish compressed video (<code>/image_raw/compressed</code>).</p>

    <p><strong>Step 1: Plug in the USB Camera</strong><br>
    Connect your USB camera (e.g., Logitech Brio 100) to the Raspberry Pi or your PC using a USB port.<br>
    You can check if it‚Äôs connected by running:</p>
    <pre><code>ls /dev/video*</code></pre>
    <p>If you see <code>/dev/video0</code>, the camera is detected.</p>

    <p><strong>Step 2: Install ROS 2 Camera Packages</strong><br>
    Make sure these packages are installed:</p>
    <pre><code>sudo apt update
sudo apt install ros-humble-image-tools ros-humble-v4l2-camera</code></pre>

    <p><strong>Step 3: Launch the Raw Image Publisher</strong><br>
    Use the <code>v4l2_camera</code> node to start publishing camera frames to <code>/image_raw</code>:</p>
    <pre><code>ros2 run v4l2_camera v4l2_camera_node</code></pre>
    <p>By default, it will start broadcasting frames to <code>/image_raw</code>.</p>

    <p><strong>Step 4: Check the Topic</strong><br>
    To verify if the camera is streaming, run:</p>
    <pre><code>ros2 topic list</code></pre>
    <p>You should see <code>/image_raw</code> in the list.</p>

    <p><strong>Step 5: Launch the Compressed Image Publisher</strong><br>
    Use this command to publish compressed video to <code>/image_raw/compressed</code>:</p>
    <pre><code>ros2 run image_transport republish raw in:=/image_raw compressed:=/image_raw/compressed</code></pre>

    <p><strong>Step 6: Verify Output</strong><br>
    To check if both raw and compressed image streams are working, use:</p>
    <pre><code>ros2 topic echo /image_raw
ros2 topic echo /image_raw/compressed</code></pre>

    <p><strong>Step 7: View the Camera Feed</strong><br>
    You can visualize the live camera feed in RViz2 by adding an <code>Image</code> display:</p>
    <ol>
      <li>Open RViz2:
        <pre><code>rviz2</code></pre>
      </li>
      <li>Click <code>Add</code> and choose <code>Image</code>.</li>
      <li>Set the topic to <code>/image_raw</code> or <code>/image_raw/compressed</code>.</li>
      <li>Set the fixed frame to <code>camera_link</code> (or whichever TF frame is being used).</li>
    </ol>

    <p><strong>Step 8: Fixing Missing RViz2 or Errors</strong></p>
    <p>If <code>rviz2</code> isn‚Äôt installed, install it using:</p>
    <pre><code>sudo apt install ros-humble-rviz2</code></pre>

    <p>If you get device or permission errors, make sure <code>/dev/video0</code> has the right permissions:</p>
    <pre><code>sudo chmod 777 /dev/video0</code></pre>

    <p><strong>Step 9: Common Errors and Fixes</strong><br>Here are some common errors you might run into and how to fix them:</p>

    <ul>
      <li><b>Error:</b> <code>rviz2: command not found</code><br>
          <b>Fix:</b>
        <pre><code>sudo apt install ros-humble-rviz2</code></pre>
      </li>

      <li><b>Error:</b> <code>Cannot open '/dev/video0'</code> or <code>Permission denied</code><br>
          <b>Fix:</b>
        <pre><code>sudo chmod 777 /dev/video0</code></pre>
      </li>

      <li><b>Error:</b> <code>No image received on topic /image_raw</code><br>
          <b>Fixes:</b>
        <ul>
          <li>Make sure the camera is properly connected.</li>
          <li>Ensure the camera node is running:<br><code>ros2 run v4l2_camera v4l2_camera_node</code></li>
          <li>Check if <code>/image_raw</code> topic exists:<br><code>ros2 topic list</code></li>
          <li>Use:<br><code>ros2 topic echo /image_raw</code> to see live data.</li>
        </ul>
      </li>
    </ul>

    <p><strong>Step 10: View Camera Feed in RViz2</strong><br>To visualize the live video from your USB camera in RViz2:</p>
    <ol>
      <li>Launch RViz2:
        <pre><code>rviz2</code></pre>
      </li>
      <li>In RViz2:
        <ul>
          <li>Click the <code>Add</code> button in the bottom left.</li>
          <li>Choose <code>Image</code> from the list.</li>
        </ul>
      </li>
      <li>In the Image settings:
        <ul>
          <li>Set the topic to:<br><code>/image_raw/compressed</code></li>
        </ul>
      </li>
    </ol>

    <p>Now you should see your camera stream inside RViz2!</p>
  </details>
</section>


<section class="card">
  <details>
    <summary>üõ∞Ô∏è Lidar Setup</summary>

    <p><strong>What is LiDAR?</strong></p>
    <p>
      LiDAR stands for Light Detection and Ranging. It‚Äôs a special kind of sensor that uses laser beams to measure how far things are around it.
      You can think of it like a superhero‚Äôs radar‚Äîit spins and shoots out tiny lasers, then checks how long it takes for them to bounce back.
      That‚Äôs how it knows where walls, chairs, or even people are! Robots use LiDAR to ‚Äúsee‚Äù and move around safely without bumping into things.
    </p>

    <p><strong>How to Set Up RPLIDAR C1 on ROS 2 (Ubuntu)</strong><br>
    Let‚Äôs install the LiDAR on a Raspberry Pi running Ubuntu and ROS 2 Humble. Follow these simple steps:</p>

    <p><strong>Step 1: Set up your ROS 2 environment</strong></p>
    <pre><code>source /opt/ros/humble/setup.bash</code></pre>

    <p><strong>Step 2: Create a new workspace folder</strong><br>This is where you‚Äôll store your LiDAR files:</p>
    <pre><code>cd ~
mkdir -p ~/ws_lidar/src
cd ~/ws_lidar/src</code></pre>

    <p><strong>Step 3: Download the LiDAR software</strong></p>
    <pre><code>git clone https://github.com/Slamtec/sllidar_ros2.git</code></pre>

    <p><strong>Step 4: Check if the folder was downloaded</strong></p>
    <pre><code>ls -la</code></pre>
    <p>You should see a folder named <code>sllidar_ros2</code>.</p>

    <p><strong>Step 5: Build the workspace</strong></p>
    <pre><code>cd ~/ws_lidar/
colcon build --symlink-install</code></pre>
    <p>If you see warnings (stderr), don‚Äôt worry! They're just messages‚Äînot errors.</p>

    <p><strong>Step 6: Check if the build worked</strong></p>
    <pre><code>ls -la</code></pre>
    <p>Look for: <code>build</code>, <code>install</code>, <code>log</code>, and <code>src</code></p>

    <p><strong>Step 7: Tell your system about the new software</strong></p>
    <pre><code>source ~/ws_lidar/install/setup.bash</code></pre>

    <p><strong>Step 8: Plug in your RPLIDAR via USB</strong></p>
    <pre><code>ls -la /dev | grep USB</code></pre>
    <p>Look for something like:</p>
    <pre><code>crw-rw---- 1 root dialout ... ttyUSB0</code></pre>

    <p><strong>Step 9: Give permission to access the LiDAR</strong></p>
    <pre><code>sudo chmod 777 /dev/ttyUSB0</code></pre>
    <p>Double check:</p>
    <pre><code>ls -la /dev | grep USB</code></pre>
    <p>Now it should say:</p>
    <pre><code>crwxrwxrwx ...</code></pre>

    <p><strong>Step 10: Launch the LiDAR!</strong></p>
    <pre><code>ros2 launch sllidar_ros2 view_sllidar_c1_launch.py</code></pre>

    <p><strong>Step 11: Open RViz2 to See the LiDAR Scan</strong></p>
    <pre><code>rviz2</code></pre>
    <p>RViz2 is like the robot‚Äôs eyes! It shows a live 2D scan of what the LiDAR "sees" around it.</p>

    <p><strong>Step 12: Set the RViz2 Display Settings</strong><br>Once RViz2 opens, follow these steps:</p>
    <ol>
      <li>On the left panel, click <code>Add</code> ‚Üí choose <code>LaserScan</code>.</li>
      <li>Set the LaserScan Topic to: <code>/scan</code></li>
      <li>Set the Fixed Frame (top left dropdown) to: <code>laser</code></li>
    </ol>
    <p>Now you should start seeing dots or lines representing objects around the LiDAR!</p>

    <p><strong>Step 13: What if RViz2 is not installed?</strong><br>If your terminal says:</p>
    <pre><code>Command 'rviz2' not found</code></pre>
    <p>Then install it using this command:</p>
    <pre><code>sudo apt update
sudo apt install ros-humble-rviz2</code></pre>
    <p>Once installed, try again:</p>
    <pre><code>rviz2</code></pre>

  </details>
</section>


    <section class="card">
      <details>
        <summary>üåÄ How to Set Up RPLIDAR C1 on ROS 2</summary>
        <ol>
          <li>Source environment:<br><code>source /opt/ros/humble/setup.bash</code></li>
          <li>Create workspace:<br><code>mkdir -p ~/ws_lidar/src</code></li>
          <li>Clone repo:<br><code>git clone https://github.com/Slamtec/sllidar_ros2.git</code></li>
          <li>Build:<br><code>cd ~/ws_lidar && colcon build --symlink-install</code></li>
          <li>Source overlay:<br><code>source install/setup.bash</code></li>
          <li>Connect USB, check:<br><code>ls -la /dev | grep USB</code></li>
          <li>Grant permissions:<br><code>sudo chmod 777 /dev/ttyUSB0</code></li>
          <li>Launch:<br><code>ros2 launch sllidar_ros2 view_sllidar_c1_launch.py</code></li>
          <li>Open RViz2:<br><code>rviz2</code></li>
          <li>Set display: <code>Add ‚Üí LaserScan</code>, topic: <code>/scan</code>, frame: <code>laser</code></li>
        </ol>
      </details>
    </section>

    <section class="card">
      <details>
        <summary>‚öôÔ∏è Motor HAT Setup (Cokoino 4WD)</summary>
        <ul>
          <li>7V‚Äì12.6V power input</li>
          <li>Regulates 5V to Pi GPIO</li>
          <li>IN1‚ÄìIN4, ENA/ENB, PWM controlled via GPIO</li>
          <li>Motor map:
            <ul>
              <li>Motor 1 ‚Äì Front Left</li>
              <li>Motor 2 ‚Äì Front Right</li>
              <li>Motor 3 ‚Äì Rear Left</li>
              <li>Motor 4 ‚Äì Rear Right</li>
            </ul>
          </li>
        </ul>
      </details>
    </section>

    <section class="card">
        <details>
          <summary>üìé Download Project Files (Word Format)</summary>
          <p>You can download the full setup guides and step-by-step documentation as Word files using the links below:</p>
          <ul>
            <li>
              <a href="files/Lidar.docx" download>üìÑ LiDAR Setup Guide (DOCX)</a>
            </li>
            <li>
              <a href="files/Logitech Cam.docx" download>üì∑ USB Camera Setup Guide (DOCX)</a>
            </li>
            <li>
              <a href="files/Step by step guide(1).docx" download>üìù Complete Step-by-Step Guide (DOCX)</a>
            </li>
          </ul>
          <p>üìå You can print these out and scan the QR code (see below) to come back to the website any time!</p>
        </details>
      </section>
      <section class="card">
        <h2>üé¨ Video Demonstrations</h2>
        <p>Watch the LiDAR Car system in action, including manual control, autonomous mode, and full system movement.</p>
      
        <div class="video-container">
          <!-- Video 1: Autonomous Navigation -->
          <div class="video-block">
            <h3>üöò Autonomous Navigation Mode</h3>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/TEothjIMlyU"
              title="Autonomous Navigation Mode" frameborder="0" allowfullscreen></iframe>
          </div>
      
          <!-- Video 2: Keyboard Manual Control -->
          <div class="video-block">
            <h3>‚å®Ô∏è Keyboard-Controlled Driving</h3>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/9ZjfeJcFqJo"
              title="Keyboard Control Driving" frameborder="0" allowfullscreen></iframe>
          </div>
      
          <!-- Video 3: LiDAR Car Movement Demo -->
          <div class="video-block">
            <h3>üõû LiDAR Car Movement Demo</h3>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/f-S7wbVViuI"
              title="LiDAR Car Movement" frameborder="0" allowfullscreen></iframe>
          </div>
        </div>
      </section>      

      <section class="qr-section">
        <h3>üì± Quick Access</h3>
        <p>Scan this QR code to return to the LiDAR Car Project website.</p>
        <img src="media/QRcode.jpg" alt="QR code to project website" class="qr-code" />
      </section>
      
  </main>

  <footer>
    <p>¬© 2025 Connor Reagan, Hugo Acevedo, Dhruveen Sheth</p>
  </footer>

  <script src="js/main.js"></script>
</body>
</html>
