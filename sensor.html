<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sensor Setup Guide</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <header>
    <h1>Sensor Setup Guide</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="parts.html">Parts List</a>
      <a href="sensor.html">Sensor Setup</a>
      <a href="lidar.html">LiDAR Car</a>
      <a href="troubleshoot.html">Troubleshooting</a>
    </nav>
    <button class="toggle-dark-btn" onclick="toggleDarkMode()">üåô Toggle Dark Mode</button>
  </header>

  <main>
    <section class="card">
      <details open>
        <summary>üìã Overview & Setup</summary>
        <p>This guide walks you through building a robust, multi-sensor demo system using a Raspberry Pi 4B running Raspberry Pi OS. Each component is tested individually and then combined into one working system. This document is written to be accessible for beginners, complete with fallback advice and troubleshooting context.</p>
        <h3>Hardware Components</h3>
        <ul>
          <li>Ultrasonic Sensor (HC-SR04)</li>
          <li>LCD Display (1602 Parallel)</li>
          <li>ArduCam Camera Module (IMX708 with PiCamera2)</li>
        </ul>
        <h3>You‚Äôll learn:</h3>
        <ul>
          <li>GPIO wiring and hardware setup</li>
          <li>Library installation</li>
          <li>Full commented Python scripts</li>
          <li>How to use the terminal for testing</li>
          <li>How to troubleshoot common issues</li>
        </ul>
      </details>
    </section>

    <section class="card">
      <details>
        <summary>üõ†Ô∏è Raspberry Pi OS Setup & Remote Access</summary>
        <h3>1. Raspberry Pi OS Installation</h3>
        <ul>
          <li>Download from <a href="https://www.raspberrypi.com/software" target="_blank">raspberrypi.com/software</a></li>
          <li>Select Raspberry Pi OS (64-bit), enable SSH, set Wi-Fi credentials.</li>
          <li>Insert SD card into Pi and boot.</li>
        </ul>
        <h3>2. Tailscale VPN Access</h3>
        <div class="code-block"><code>curl -fsSL https://tailscale.com/install.sh | sh
sudo tailscale up</code></div>
        <h3>3. Raspberry Pi Connect</h3>
        <div class="code-block"><code>sudo apt update
sudo apt install -y rpi-connect
rpi-connect enable</code></div>
      </details>
    </section>

    <section class="card">
      <details>
        <summary>üìè Ultrasonic Sensor (HC-SR04)</summary>
        <p>The HC-SR04 sends pulses and times the echo to measure distance:</p>
        <div class="code-block"><code>distance (cm) = time (s) * 17150</code></div>
        <ul>
          <li>VCC ‚Üí 5V</li>
          <li>GND ‚Üí GND</li>
          <li>TRIG ‚Üí GPIO 5</li>
          <li>ECHO ‚Üí GPIO 6</li>
        </ul>
        <div class="code-block"><code>sudo apt install python3-rpi.gpio</code></div>
        <details>
          <summary>üìú Python Code</summary>
          <div class="code-block"><code>import RPi.GPIO as GPIO
import time

TRIG = 5
ECHO = 6

GPIO.setmode(GPIO.BCM)
GPIO.setwarnings(False)
GPIO.setup(TRIG, GPIO.OUT)
GPIO.setup(ECHO, GPIO.IN)

try:
    while True:
        GPIO.output(TRIG, True)
        time.sleep(0.00001)
        GPIO.output(TRIG, False)
        while GPIO.input(ECHO) == 0:
            pulse_start = time.time()
        while GPIO.input(ECHO) == 1:
            pulse_end = time.time()
        distance = (pulse_end - pulse_start) * 17150
        print(f"Distance: {distance:.2f} cm")
        time.sleep(1)
except:
    GPIO.cleanup()</code></div>
        </details>
      </details>
    </section>

    <section class="card">
      <details>
        <summary>üì∫ LCD Display (1602)</summary>
        <ul>
          <li>RS ‚Üí GPIO 25</li>
          <li>E ‚Üí GPIO 24</li>
          <li>D4‚ÄìD7 ‚Üí GPIO 23, 17, 18, 22</li>
        </ul>
        <div class="code-block"><code>from RPLCD import CharLCD
import time

lcd = CharLCD(cols=16, rows=2, pin_rs=25, pin_e=24,
              pins_data=[23, 17, 18, 22], numbering_mode='BCM')

lcd.write_string("LCD works!")
time.sleep(2)</code></div>
      </details>
    </section>

    <section class="card">
      <details>
        <summary>üì∑ ArduCam with Picamera2</summary>
        <div class="code-block"><code>sudo apt install -y libcamera-dev libopencv-dev</code></div>
        <div class="code-block"><code>from picamera2 import Picamera2
import cv2

picam2 = Picamera2()
picam2.configure(picam2.create_preview_configuration(
    main={"size": (640, 480), "format": "RGB888"}))
picam2.start()

while True:
    frame = picam2.capture_array()
    cv2.imshow("Camera", frame)
    if cv2.waitKey(1) == ord('q'):
        break

picam2.stop()
cv2.destroyAllWindows()</code></div>
      </details>
    </section>
  </main>

  <aside>
    <h3>üîå GPIO Reference</h3>
    <img src="media/gpio-diagram.png" alt="GPIO Pinout Reference" />
  </aside>
  
  <section class="qr-section">
    <h3>üì± Quick Access</h3>
    <p>Scan this QR code to return to the LiDAR Car Project website.</p>
    <img src="media/QRcode.jpg" alt="QR code to project website" class="qr-code" />
  </section>
  
  <footer>
    <p>¬© 2025 Connor Reagan, Hugo Acevedo, Dhruveen Sheth</p>
  </footer>

  <script src="js/main.js"></script>
</body>
</html>
